<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Untitled Document</title>
<link rel="stylesheet" type="text/css" href="js/jquery.mobile-1.3.0.min.css"/>
<script type="text/javascript" src="js/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="js/jquery.mobile-1.3.0.min.js"></script>
<script type="text/javascript" charset="utf-8" src="cordova.js"></script>
<script>

function onBodyLoad() {
	document.addEventListener('deviceready', onDeviceReady);	
}

function onDeviceReady() {
	$("#btnStart").live("touchend",onStart );
}

function onStart() {
	
	$.mobile.showPageLoadingMsg();
	
	$.ajax({
        url: 'http://www.nextflow.in.th/example/phonegap/jsonp/simple.php',
        dataType: 'jsonp',
        jsonp: 'jsoncallback',
        timeout: 5000,
        success: function(data, status){
			
		$.mobile.hidePageLoadingMsg();
           alert("something returned");
			
			$.each(data, function(i,item) {
				$("#result").append( item.name + " " + item.tel );
			});
        },
        error: function(xhr, ajaxOptions, thrownError) {
                                    alert('Error ' + xhr.statusText + xhr.responseText);                                        
                                }
    });
}
</script>
</head>

<body onLoad="onBodyLoad()">
<div data-role="page" id="page">
  <div data-role="header" data-position="fixed">
    <h1>Example</h1>
  </div>
  <div data-role="content">
  	<a id="btnStart" href="#" data-role="button">Start</a>
    <div id="result">
    </div>
  </div>
  <div data-role="footer" data-position="fixed">
    <h4>Nextflow.in.th</h4>
  </div>
</div>
</body>
</html>
